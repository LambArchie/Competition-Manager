{% extends "base.html" %}

{% block styles %}
{{super()}}
<!--Font Awesome-->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
{% endblock %}
{% block app_content %}
    <h1>{{ name }}</h1>
    <p>{{ body }}</p>
    <br>
    <p>Submissions:</p>
    {% set count = 0 %}
    {% for submission in submissions %}
        <div class="row">
            <div class="col-auto mr-auto"><a href="{{ url_for('competition.submission_page', comp_id=submission.comp_id, cat_id=cat_id, sub_id=submission.id) }}">{{ submission.name }}</a></div>
            {% if admin %}
                <div class="col-auto"><div class="rating">
                    {% set vars = {'scoreToGo': (scores[loop.index-1][0] / 2), 'count': 5} %}
                    {% for i in range(vars.scoreToGo|round(0, 'floor')|int) %}
                        {% if vars.update({'scoreToGo': vars.scoreToGo - 1}) %}{% endif %}
                        {% if vars.update({'count': vars.count - 1}) %}{% endif %}
                        <i class="fas fa-star"></i>
                    {% endfor %}
                    {% if vars.scoreToGo|round(1) >= 0.5 %}
                        {% if vars.update({'count': vars.count - 1}) %}{% endif %}
                        <i class="fas fa-star-half-alt"></i>
                    {% endif %}
                    {% for i in range(vars.count) %}
                        <i class="far fa-star"></i>
                    {% endfor %}
                    {{ scores[loop.index-1][0]|round(1) }}
                    <span class="text-muted">From {{ scores[loop.index-1][1] }} votes</span>
                </div></div>
            {% endif %}
        </div>
    {% endfor %}
    <br>
    <p><a href="{{ url_for('competition.submission_create', comp_id=comp_id, cat_id=cat_id) }}">Create Submission</a></p>
    {% if admin %}
        <p><a href="{{ url_for('competition.category_edit', comp_id=comp_id, cat_id=cat_id) }}">Edit Category</a></p>
    {% endif %}
    <p><a href="{{ url_for('competition.categories_overview', comp_id=comp_id) }}">All Categories</a></p>
{% endblock %}